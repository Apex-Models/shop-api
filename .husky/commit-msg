# Get commit message
commit_message=$(cat "$1")

echo "📝 Validating commit message..."

# Check if message is not empty
if [ -z "$commit_message" ]; then
    echo "❌ Commit message cannot be empty"
    exit 1
fi

# Check minimum length (at least 10 characters)
if [ ${#commit_message} -lt 10 ]; then
    echo "❌ Commit message must be at least 10 characters long"
    echo "Current message: '$commit_message' (${#commit_message} characters)"
    exit 1
fi

# Suggestions for good commit messages (optional, warning only)
if ! echo "$commit_message" | grep -qE "^(feat|fix|docs|style|refactor|test|chore|perf)(\(.+\))?: .+"; then
    echo "💡 Suggestion: Use the format 'type: description'"
    echo "   Examples: feat: add user login, fix: resolve CORS issue"
    echo "   Types: feat, fix, docs, style, refactor, test, chore, perf"
fi

echo "✅ Commit message is valid: $commit_message" 